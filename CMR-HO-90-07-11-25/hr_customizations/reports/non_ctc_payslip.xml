<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <!-- Report template header -->
        <template id="non_ctc_header">
            <t t-if="not o" t-set="o" t-value="doc"/>
            <t t-if="not company">
                <t t-if="company_id">
                    <t t-set="company" t-value="company_id"/>
                </t>
                <t t-elif="o and 'company_id' in o and o.company_id.sudo()">
                    <t t-set="company" t-value="o.company_id.sudo()"/>
                </t>
            </t>
            <!-- Header Section (Clean Layout) -->
            <div class="header">
            </div>
        </template>

        <template id="non_ctc_template">
            <t t-if="not o" t-set="o" t-value="doc"/>
            <t t-if="not company">
                <t t-if="company_id">
                    <t t-set="company" t-value="company_id"/>
                </t>
                <t t-elif="o and 'company_id' in o and o.company_id.sudo()">
                    <t t-set="company" t-value="o.company_id.sudo()"/>
                </t>
                <t t-else="else">
                    <t t-set="company" t-value="res_company"/>
                </t>
            </t>
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc" style="font-family: Verdana, Arial, sans-serif;">
                    <t t-call="hr_customizations.non_ctc_header"/>
                    <div class="page">
                        <div style="padding-left:5px; padding-right:5px;">
                            <table style="width:100%; border-collapse: collapse; font-size: 13px; line-height: 1.6; ">

                                <!-- ========================= COMPANY HEADER ========================= -->
                                <tr>
                                    <!-- Logo (colspan 4) -->
                                    <td colspan="3" rowspan="2"
                                        style="text-align: left; vertical-align: middle;
                   border-top: 1px solid #000; border-left: 1px solid #000; padding: 8px;">
                                        <img t-if="company.logo"
                                             t-att-src="image_data_uri(company.logo)"
                                             alt="Company Logo"
                                             style="height: 70px; width: auto;"/>
                                    </td>

                                    <!-- Company Details (colspan 4) -->
                                    <td colspan="3" rowspan="2"
                                        style="text-align: left; vertical-align: middle;
                   border-top: 1px solid #000; border-right: 1px solid #000; padding: 8px;">
                                        <strong t-field="company.name" style="font-size: 15px; display: block;"/>
                                        <span t-field="company.street"/>
                                        <t t-if="company.street2">,
                                            <span t-field="company.street2"/>
                                        </t>
                                        <br/>
                                        <span t-field="company.city"/>
                                        <t t-if="company.zip">,
                                            <span t-field="company.zip"/>
                                        </t>
                                        <br/>
                                        <t t-if="company.phone">
                                            <strong>Phone:</strong>
                                            <span t-field="company.phone"/>
                                            <br/>
                                        </t>
                                        <t t-if="company.email">
                                            <strong>Email:</strong>
                                            <span t-field="company.email"/>
                                        </t>
                                    </td>
                                    <td style="border-left: 1px solid #000;border-top: 1px solid #000;border-bottom: 1px solid #000; font-weight: bold; padding: 6px;">
                                        A/C No:
                                    </td>
                                    <td style="border-right: 1px solid #000;border-bottom: 1px solid #000;border-top: 1px solid #000; padding: 6px;">
                                        <t t-esc="doc.account_no"/>
                                    </td>

                                </tr>
                                <tr>
                                    <td style="border-left: 1px solid #000;border-top: 1px solid #000;border-bottom: 1px solid #000; font-weight: bold; padding: 6px;">
                                        UAN No:
                                    </td>
                                    <td style="border-right: 1px solid #000;border-bottom: 1px solid #000;border-top: 1px solid #000; font-weight: bold; padding: 6px;">

                                        <t t-esc="doc.employee_id.l10n_in_uan"/>
                                    </td>
                                </tr>


                                <tr>
                                    <td colspan="3" style="border-left: 1px solid #000; padding: 6px;">Payslip for the
                                        Month
                                        of
                                    </td>
                                    <td colspan="3" style="border-right: 1px solid #000;">
                                        <t t-esc="doc.date_from and doc.date_from.strftime('%b-%Y') or ''"/>

                                    </td>
                                    <td style="border-left: 1px solid #000;border-bottom: 1px solid #000; font-weight: bold; padding: 6px;">
                                        ESI:
                                    </td>
                                    <td style="border-right: 1px solid #000;border-top: 1px solid #000;border-bottom: 1px solid #000; font-weight: bold; padding: 6px;">
                                           <t t-esc="doc.employee_id.l10n_in_esic_number"/>
                                    </td>
                                </tr>

                                <!-- Row 5: Division + CTC -->
                                <tr>
                                    <td colspan="3"
                                        style="border-left: 1px solid #000; border-bottom: 1px solid #000; padding: 6px;">
                                        Division: CMR Central Fashion
                                    </td>
                                    <td colspan="3"
                                        style="border-right: 1px solid #000; border-bottom: 1px solid #000; padding: 6px;">
                                        CTC:
                                        <t t-esc="doc.ctc"/>
                                    </td>
                                    <td style="border-left: 1px solid #000; font-weight: bold; padding: 6px;">
                                        Department
                                    </td>
                                    <td style="border-right: 1px solid #000; font-weight: bold; padding: 6px;">
                                        <t t-esc="doc.employee_id.department_id.name"/>
                                    </td>


                                </tr>

                                <!-- ========================= PAYSILP DETAILS ========================= -->
                                <!--                            <thead>-->
                                <tr style="background-color: #f5f5f5; text-align: left;">
                                    <th colspan="2" style="border: 1px solid #000; padding: 6px;">Name</th>
                                    <th colspan="2" style="border: 1px solid #000; padding: 6px;">Code</th>
                                    <th colspan="2" style="border: 1px solid #000; padding: 6px;">DOJ</th>
                                    <th colspan="2" style="border: 1px solid #000; padding: 6px;">Designation</th>
                                </tr>
                                <!--                            </thead>-->

                                <tbody>
                                    <tr>
                                        <td colspan="2" style="border: 1px solid #000; padding: 6px;">
                                            <t t-esc="doc.employee_id.name"/>
                                        </td>
                                        <td colspan="2" style="border: 1px solid #000; padding: 6px;">
                                            <t t-esc="doc.emp_code"/>
                                        </td>
                                        <td colspan="2" style="border: 1px solid #000; padding: 6px;">
                                            <t t-esc="doc.employee_id.date_of_joining.strftime('%d-%b-%Y').upper()"/>
                                        </td>
                                        <td colspan="2" style="border: 1px solid #000; padding: 6px;">
                                            <t t-esc="doc.employee_id.job_id.name"/>
                                        </td>
                                    </tr>
<t t-set="components" t-value="get_salary_components(doc.id, doc.date_from)"/>


                                    <tr style="background-color: #f5f5f5; text-align: center; font-weight: bold;">
                                        <td colspan="2" style="border: 1px solid #000; padding: 6px;">Earnings Rates
                                        </td>
                                        <td colspan="2" style="border: 1px solid #000; padding: 6px;">Working Details
                                        </td>
                                        <td colspan="2" style="border: 1px solid #000; padding: 6px;">Earnings</td>
                                        <td colspan="2" style="border: 1px solid #000; padding: 6px;">Deduction</td>
                                    </tr>

                                    <tr>
                                        <td style="border-left: 1px solid #000; padding: 6px;">Basic</td>
                                        <td style="border-right: 1px solid #000; padding: 6px; text-align:right;">
                                           <t t-esc="components['basic']"/>
                                        </td>
                                        <td style="border-left: 1px solid #000; padding: 6px;">Present Days</td>
                                        <td style="border-right: 1px solid #000; padding: 6px; text-align:center;"><t t-esc="doc.paid_days"/>
                                        </td>
                                        <td style="border-left: 1px solid #000; padding: 6px;">Basic</td>
                                        <td style="border-right: 1px solid #000; padding: 6px; text-align:right;">
                                           <t t-esc="components['ge_basic']"/>
                                        </td>
                                        <td style="border-left: 1px solid #000; padding: 6px;">PF</td>
                                        <td style="border-right: 1px solid #000; padding: 6px; text-align:right;">
                                            <t t-esc="components['pf']"/>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td style="border-left: 1px solid #000; padding: 6px;">HRA</td>
                                        <td style="border-right: 1px solid #000;padding: 6px; text-align:right;">
                                             <t t-esc="components['hra']"/>
                                        </td>
                                        <td style="border-left: 1px solid #000;padding: 6px;">WOFF</td>
                                        <td style="border-right: 1px solid #000;padding: 6px; text-align:center;"><t t-esc="doc.lop_work_entry_count"/></td>
                                        <td style="border-left: 1px solid #000;padding: 6px;">HRA</td>
                                        <td style="border-right: 1px solid #000; padding: 6px; text-align:right;">
                                             <t t-esc="components['simple_hra']"/>
                                        </td>
                                        <td style="border-left: 1px solid #000;padding: 6px;">ESI</td>
                                        <td style="border-right: 1px solid #000;padding: 6px; text-align:right;">
                                            <t t-esc="components['esi']"/>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td style="border-left: 1px solid #000; padding: 6px;">Bonus</td>
                                        <td style="border-right: 1px solid #000; padding: 6px; text-align:right;">
                                             <t t-esc="components['bonus']"/>
                                        </td>
                                        <td style="border-left: 1px solid #000; padding: 6px;">PH</td>
                                        <td style="border-right: 1px solid #000; padding: 6px; text-align:center;">0
                                        </td>
                                        <td style="border-left: 1px solid #000; padding: 6px;">Bonus</td>
                                        <td style="border-right: 1px solid #000; padding: 6px; text-align:right;">
                                           <t t-esc="components['bn']"/>
                                        </td>
                                        <td style="border-left: 1px solid #000; padding: 6px;">P.Tax</td>
                                        <td style="border-right: 1px solid #000; padding: 6px; text-align:right;"><t t-esc="components['p_tax']"/>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td colspan="2" style="border-left: 1px solid #000;padding: 6px;"></td>
                                        <td style="border-left: 1px solid #000; padding: 6px;">Days Paid</td>
                                        <td style="border-right: 1px solid #000; padding: 6px; text-align:center;">
<!--                                             <t t-esc="doc.paid_days"/>-->
                                        </td>
                                        <td colspan="2"
                                            style="border-left: 1px solid #000;border-right: 1px solid #000; padding: 6px;"></td>
                                        <td colspan="2" style="border-right: 1px solid #000; padding: 6px;"></td>
                                    </tr>

                                    <tr style="font-weight: bold;">
                                        <td colspan="2" style="border: 1px solid #000;"></td>
                                        <td colspan="2" style="border: 1px solid #000;"></td>
                                        <td colspan="2" style="border: 1px solid #000; text-align:right;"> <t t-esc="components['total_pf']"/></td>
                                        <td colspan="2" style="border: 1px solid #000; text-align:right;"><t t-esc="components['total_tax_pf']"/></td>
                                    </tr>

                                    <tr style="background-color: #f5f5f5; font-weight: bold;">
                                        <td colspan="6" style="border: 1px solid #000; padding: 6px;">NET PAY</td>
                                        <td colspan="2" style="border: 1px solid #000; padding: 6px; text-align:right;">
                                          <t t-esc="components['total_bonous_amnt']"/>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td colspan="6" style="border: 1px solid #000; padding: 6px;">Total Bonus Amount
                                        </td>
                                        <td colspan="2" style="border: 1px solid #000; padding: 6px; text-align:right;">
                                            <t t-esc="components['TOTAL_BONUS_AMOUNT']"/>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td colspan="6"
                                            style="border-left: 1px solid #000; border-bottom: 1px solid #000; padding: 6px;">
                                           Total Amount
                                        </td>
                                        <td colspan="2"
                                            style="border-right: 1px solid #000; border-bottom: 1px solid #000; padding: 6px;text-align:right;">
                                           <t t-esc="components['amount']"/>
                                        </td>
                                    </tr>
                                    <!--                                <tr>-->
                                    <!--                                    <td colspan="4" style="border:none; padding:0;">-->
                                    <!--                                        <div style="width:100%; height:1px; background: repeating-linear-gradient(to right, black 0, black 5px, transparent 5px, transparent 10px);"></div>-->
                                    <!--                                    </td>-->
                                    <!--                                </tr>-->
                                </tbody>
                            </table>
                        </div>
                        <br/>
                        <div style="padding-left:5px; padding-right:5px;">
                            <tabel style="margin:10px;">
                                <tr>
                                    <td colspan="8"
                                        style="text-align:center; border:none;margin-top:10px; font-family: monospace; font-weight: bold;">
                                        **********************************************************************************************************************************

                                    </td>
                                </tr>
                            </tabel>
                            <div>Computer generated Payslip</div>
                        </div>

                        <br/>
                        <br/>
                        <div style="padding-left:5px; padding-right:5px;">
                            <table style="width:40%; border-collapse: collapse; font-size: 13px;margin:10x;">
                                <tr style="background-color: #f5f5f5; font-weight: bold; text-align: center;">
                                    <td colspan="2" style="border: 1px solid #000; padding: 6px;">
                                        Incentives Details
                                    </td>
                                </tr>
                                <tr>
                                    <td style="border: 1px solid #000; padding: 6px;">LEAVES AMOUNT</td>
                                    <td style="border: 1px solid #000; padding: 6px; text-align: right;">0.00</td>
                                </tr>
                                <tr style="font-weight: bold;">
                                    <td style="border: 1px solid #000; padding: 6px;">Total</td>
                                    <td style="border: 1px solid #000; padding: 6px; text-align: right;">0.00</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </t>
            </t>
        </template>

        <record id="payslip_report_paper_format" model="report.paperformat">
            <field name="name">Payslip</field>
            <field name="default" eval="False"/>
            <field name="format">A4</field>
            <field name="orientation">Portrait</field>
            <field name="margin_top">15</field>
            <field name="margin_bottom">10</field>
            <field name="margin_left">10</field>
            <field name="margin_right">10</field>
            <field name="header_spacing">15</field>
            <field name="dpi">90</field>
        </record>

        <record id="non_ctc_report_payslip" model="ir.actions.report">
            <field name="name">Non CTC Report</field>
            <field name="model">hr.payslip</field>
            <field name="report_type">qweb-pdf</field>
            <field name="report_name">hr_customizations.non_ctc_template</field>
            <field name="report_file">hr_customizations.non_ctc_template</field>
            <field name="print_report_name">'Non CTC Report - %s' % (object.number or 'Draft')</field>
            <!-- optional automatic binding to the form view -->
            <!--                    <field name="binding_model_id" ref="hr_payroll.view_hr_payslip_form"/>-->
            <field name="binding_type">report</field>
            <field name="paperformat_id" ref="hr_customizations.payslip_report_paper_format"/>
        </record>

    </data>
</odoo>
