<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

<!-- Inherit and modify the SwitchCompanyMenu template -->
    <t t-inherit="web.SwitchCompanyMenu" t-inherit-mode="extension" owl="1">
    <xpath expr="//Dropdown" position="inside">
        <!-- Add confirmation buttons -->
        <div class="d-flex justify-content-end p-2 border-top" t-if="state.hasChanges">
            <button type="button" class="btn btn-primary" t-on-click="() => this.companySelector.applyChanges()">
                Confirm
            </button>
            <button type="button" class="btn btn-secondary me-2"
                    t-on-click="() => this.companySelector.cancelChanges()">
                Cancel
            </button>
        </div>
    </xpath>
</t>

    <!-- Inherit and modify the SwitchCompanyItem template -->
    <t t-inherit="web.SwitchCompanyItem" t-inherit-mode="extension" owl="1">
        <xpath expr="//div[@class='d-flex']" position="replace">
            <div class="d-flex">
                <div class="border-end toggle_company"
                     t-att-class="{
                         'border-primary': isCurrent,
                         'disabled': !isCompanyAllowed
                     }"
                     t-on-click.stop="() => this.toggleCompany(props.company.id)">
                    <span class="btn border-0 p-2" t-att-class="isCompanyAllowed ? 'btn-link text-primary' : 'disabled'">
                        <i class="fa fa-fw py-2"
                           t-att-class="isCompanySelected ? 'fa-check-square text-primary' : 'fa-square-o'"/>
                    </span>
                </div>

                <div class="d-flex flex-grow-1 align-items-center py-0 log_into ps-2"
                     t-att-class="isCurrent ? 'alert-primary' : 'btn fw-normal border-0 ' + (isCompanyAllowed ? 'btn-link text-primary' : 'disabled')"
                     t-on-click="() => this.logIntoCompany(props.company.id)">
                    <span class='company_label pe-3' t-att-class="isCurrent ? 'text-900 fw-bold' : ''"
                          t-attf-style="padding-left:{{props.level * 20}}px;">
                        <t t-out="props.company.name"/>
                    </span>
                </div>
            </div>
        </xpath>
</t>

</templates>